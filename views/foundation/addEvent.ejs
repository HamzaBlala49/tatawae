<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/all.min.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/eventInfo.css">
    <title>notifications</title>
</head>
<body>
    <main>
         <div class="">
            <div class="row position-relative">
                <div class="col-2 vh-100 position-sticky top-0 end-0 bg-light">
                    <aside class="p-3">
                        <div class="brand fs-3 mb-3 h-text-primary-dark fw-bold">تطوع</div>
                        <ul class="sidebar-link">
                            <li>
                                <a href="./home.html">
                                    <i class="fa-solid fa-house"></i>
                                    الصفحة الرئيسية
                                </a>
                            </li>
                            <li>
                                <a href="./notifications.html">
                                    <i class="fa-solid fa-bell"></i>
                                    الأشعارات
                                </a>
                            </li>
                            <li>
                                <a href="./events.html" class="active-link-sidebar">
                                    <i class="fa-solid fa-handshake-angle"></i>
                                     إدارة الأحداث
                                </a>
                            </li>
                            <li>
                                <a href="./myEvents.html">
                                    <i class="fa-solid fa-people-group"></i>
                                    فريقي التطوعي
                                </a>
                            </li>
                            <li>
                                <a href="./profile.html" >
                                    <i class="fa-solid fa-user"></i>
                                    ملفي الشخصي
                                </a>
                            </li>
                            <li>
                                
                            </li>
                            <li class="mt-4">
                                <a href="./profile.html" class="h-bg-primary-light rounded-pill px-2 py-1">
                                    <i class="fa-solid fa-right-from-bracket"></i>
                                    تسجيل الخروج
                                </a>
                            </li>
                        </ul>
                    </aside>
                </div>
                <div class="col-7">
                    <section class="p-3">
                        <h4 class="fw-bold">إضافة حدث</h4>
                        <hr>
                        <a href="/foundation/events" class="backBtn btn h-btn-primary d-flex justify-content-center align-items-center">
                            <i class="fa-solid fa-arrow-right"></i>
                        </a>
                        <form action="/foundation/events/create" method="post" enctype="multipart/form-data" class="mt-3">
                            <div class="row">
                                <div class="col-6">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">العنوان:</label>
                                        <input  type="text" required class="form-control rounded-pill form-control-sm h-text-15" name="title" placeholder="عنوان..."/>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17  fw-semibold">الجنس:</label>
                                            <select class="form-select form-select-sm rounded-pill h-text-15" name="gender" >
                                                <option selected value="ذكور وإناث">ذكور وإناث</option>
                                                <option value="ذكور">ذكور</option>
                                                <option value="إناث">إناث</option>
                                            </select>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">المدينة:</label>
                                            <select class="form-select form-select-sm rounded-pill h-text-15" name="city" id="" >
                                                <option selected value="">أختر المدينة</option>
                                                <option value="المكلا">المكلا</option>
                                                <option value="سيؤون">سيؤون</option>
                                                <option value="غيل باوزير">غيل باوزير</option>
                                            </select>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">رابط الموقع:</label>
                                        <input  type="url" required class="form-control rounded-pill form-control-sm h-text-15" name="googleMapUrl" placeholder=""/>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">عدد المتطوعين:</label>
                                        <input  type="number" min="1" value="1" required class="form-control form-control-sm rounded-pill h-text-15" name="volunteersNumber" />
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">بداية الحدث:</label>
                                        <input  type="date"  required class="form-control form-control-sm h-text-15 rounded-pill" name="startDate" />
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">نهاية الحدث:</label>
                                        <input  type="date"  required class="form-control form-control-sm h-text-15 rounded-pill" name="endDate" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">صورة الحدث:</label>
                                        <input   class="form-control form-control-sm h-text-15 rounded-pill" type="file" name="image" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="mb-3">
                                        <label for="" class="form-label h-text-17 fw-semibold">وصف الحدث:</label>
                                        <textarea required class="form-control form-control-sm h-text-15 rounded-5"  name="description" id="" rows="12"></textarea>                                        
                                    </div>
                                </div>
                               
                                <div class="col-6">
                                    <div class="mb-3">
                                        <button type="submit" id="submitBtn"  class="btn h-bg-primary-dark rounded-pill h-btn-primary text-white">
                                            حفظ
                                        </button>      
                                    </div>
                                </div>
                            </div>
                        </form>
                    </section>
                </div>
                <div class="col-3 p-2 mt-3">
                    <h6 class="fw-bold">
                        <i class="fa-solid fa-arrows-down-to-people"></i>
                        الأعضاء
                    </h6>
                    <hr>
                        <div class="mb-3 px-3">
                            <label for="" class="form-label  fw-bold h-text-17">
                                بحث
                                <i class="fa-solid fa-search"></i>
                            </label>
                            <input type="text" name="" id="" class="form-control rounded-pill form-control-sm h-text-17" placeholder="بحث" aria-describedby="helpId"/>
                        </div>
                    <div id="members" class="container h-50 overflow-auto">
                        <% data.memberShips.forEach(element => { %>

                            <div class="d-flex bg-light mb-2 p-2 rounded-pill align-items-center justify-content-around">
                                <a href="/foundation/volunteer/<%- element._id %>" class="text-decoration-none text-dark">
                                    <div class="d-flex align-items-center">
                                        <img src="/<%- element.avatar %>" alt="">
                                        <p class="h-text-15 fw-bold m-0 me-1"><%- element.username %></p>
                                    </div>
                                </a>
                                <button userId="<%- element._id %>" class="inviteBtns btn btn-warning  btn-sm rounded-pill h-text-13 fw-bold">دعوة</button>
                            </div>
                         
                        <% }) %>
                       
                    </div>
                </div>
            </div>
         </div>
    </main>
    <div></div>
    
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script>
        const invitationList =[];
        const inviteBtns = document.querySelectorAll(".inviteBtns");
        const form =  document.forms[0];
        const formData =  new FormData(form);
        const submitBtn = document.getElementById("submitBtn");
        const headers = new Headers();
        headers.append('Content-Type', 'multipart/form-data');
        
      

        inviteBtns.forEach(btn=>{
            btn.addEventListener("click",()=>{
                const userId = btn.getAttribute("userId");
                if(!invitationList.includes(userId)){
                    invitationList.push(userId);
                    btn.classList.remove("bg-warning");
                    btn.classList.add("bg-secondary");
                    btn.innerHTML = "الغاء"

                }else{
                    const index = invitationList.indexOf(userId);
                    invitationList.splice(index,1);
                    console.log(invitationList)
                    btn.classList.add("bg-warning");
                    btn.classList.remove("bg-secondary");
                    btn.innerHTML = "دعوة"
                }
            })
        })
    </script>
</body>
</html>